#!/bin/sh
#
# mpv - small mpv wrapper

DIR=/tmp/mpv

# pause mpc
mpc pause > /dev/null 2>&1

# handle multiple mpv sockets
mkdir -p "$DIR"

for socket in "$DIR"/*; do
    num=${socket##*/}

    [ "$num" != \* ] &&
        [ "$num" -gt "${max:-0}" ] && max=$num
done

socket=$DIR/$((max + 1))

trap 'rm -f "$socket"' INT TERM QUIT EXIT

command -p mpv \
    --input-ipc-server="$socket" "$@"
