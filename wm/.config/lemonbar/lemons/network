#!/bin/sh

# ensure network block isn't empty on startup
{ echo 'default via'; ip monitor route dev wlan0; } |
    while read -r event; do
        case $event in
            'default via'*)
                var=$(iwgetid -r)
                var=${var:-Disconnected}
                ;;
            'Deleted default via'*)
                var=Disconnected
                ;;
            *) continue
        esac

        printf '%s\n' "ntw î€ƒ%{O10}$var"
    done
