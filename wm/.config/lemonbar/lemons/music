#!/bin/sh

while :; do
    mpc | {
        read -r var
        read -r sta

        case $sta in
            *playing*)
                [ ${#var} -gt 45 ] &&
                    # shorten current song title
                    var=$(printf '%.45s...' "$var")
                ;;
            *) var='Not Playing'
        esac

        echo "mus î€‚%{O10}$var"
    }

    mpc idle player
done
