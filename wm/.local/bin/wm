#!/bin/sh
#
# wm - handle wm state

# clean up utilities
for bin in borders panel; do
    pkill -x "$bin"
done

case $1 in
    quit)
        # pause mpd if we aren't logged in another tty
        who | {
            while read -r user _; do
                [ "$user" = "$USER" ] &&
                    : $((cnt += 1))
            done

            [ "$cnt" -gt 1 ] || mpc pause
        }

        bspc quit
        ;;
    restart)
        bspc wm -r
esac
