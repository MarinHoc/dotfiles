#!/bin/sh
#
# screenshot - take screenshot of a preseleted area

DIR=~/medias/pics/scrots

_() bspc config "$@"

tmp=$IFS

# get preselected area
IFS=+x

set -f
set -- $(
    hacksaw                            \
        -s "$(_         border_width)" \
        -c "$(_ focused_border_color)" \
        -n 2> /dev/null)
set +f

IFS=$tmp

test $# -eq 0 && exit

# avoid accidental small screenshots
[ $(($1 < 10 && $2 < 10)) -eq 1 ] && {
    set -f
    set -- $(wattr whxy "$(lsw -r)")
    set +f
}

name=$(date +%F_%H-%M-%S).png

mkdir -p "$DIR"

shotgun -g "$1x$2+$3+$4" "$DIR/$name"
    notify-send "Screenshot saved as $name"
