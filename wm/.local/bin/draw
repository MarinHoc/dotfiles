#!/bin/sh
#
# draw - spawn a terminal in a preselected area

_() bspc config "$@"

tmp=$IFS

# get preselected area
IFS=+x

b=$(_         border_width)
c=$(_ focused_border_color)

set -f
set -- $(hacksaw -c "$c" -s "$b" -n 2> /dev/null)
set +f

IFS=$tmp

test $# -eq 0 && exit

# adjust geometry
set --              \
    $(($1 - 2 * b)) \
    $(($2 - 2 * b)) \
    "$3" "$4"

[ $(($1 < 10 && $2 < 10)) -eq 1 ] &&
    set -- 300 200 "$3" "$4"

# make the newly spawned window floating & w/ the right geometry
bspc rule -a '*' -o state=floating rectangle="$1x$2+$3+$4"

st &
